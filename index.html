<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SlideUI Block Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .glass {
      backdrop-filter: blur(12px);
      background: rgba(15,15,15,0.7);
      border: 1px solid rgba(255,255,255,0.1);
    }
    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid #333;
      border-top-color: #06b6d4;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body class="bg-gray-950 text-white min-h-screen flex flex-col items-center">

  <!-- Header -->
  <header class="glass w-full max-w-6xl mx-auto mt-6 p-5 rounded-2xl flex flex-wrap gap-3 justify-center items-center sticky top-4 z-10 shadow-xl">
    <h1 class="text-2xl font-bold">SlideUI Blocks</h1>
    <select id="category" class="px-4 py-2 bg-gray-800 text-white rounded-lg focus:ring-2 focus:ring-cyan-500"></select>
    <select id="device" class="px-4 py-2 bg-gray-800 text-white rounded-lg focus:ring-2 focus:ring-cyan-500">
      <option>Desktop</option>
      <option>Mobile</option>
    </select>
    <select id="mode" class="px-4 py-2 bg-gray-800 text-white rounded-lg focus:ring-2 focus:ring-cyan-500">
      <option>Dark Mode</option>
      <option>Light Mode</option>
      <option>Accent Mode</option>
    </select>
  </header>

  <!-- Gallery -->
  <main class="w-full max-w-6xl mt-8 px-4 pb-20">
    <div id="gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    <div id="loading" class="flex items-center justify-center py-12 text-gray-400">
      <div class="spinner mr-3"></div>
      <span>Loading blocks…</span>
    </div>
  </main>

  <script>
    // ✅ Multi-category version (auto works with all your folders)
    const BASE = `${location.origin}`; // Vercel base path

    const categories = [
      "404",
      "Online Booking",
      "About Us",
      "Password",
      "Announcement Bar",
      "Payment",
      "Benefits : Statistics",
      "Popup",
      "Blog Articles",
      "Pricing Plan",
      "Blog Category",
      "Privacy Policy",
      "CTA : Banner",
      "Product Highlight Bar",
      "Calendar",
      "Product Page",
      "Case Studies",
      "Product Specs",
      "Comparison Chart",
      "Profile",
      "Contact Us",
      "Registration : Progress Steps",
      "Courses",
      "Reviews",
      "Dashboard",
      "Services",
      "FAQ",
      "Sign In",
      "Features",
      "Sign Up",
      "Footer",
      "Simple Text",
      "Form : Survey : Quiz",
      "Social Media",
      "Forums : Discussion",
      "Tables",
      "Gallery",
      "Team",
      "Hero",
      "Testimonials",
      "How It Works",
      "Trusted Badges",
      "Integrations",
      "Upload : Download",
      "Menu-Nav"
    ];

    const catSel = document.getElementById("category");
    const devSel = document.getElementById("device");
    const modeSel = document.getElementById("mode");
    const gallery = document.getElementById("gallery");
    const loading = document.getElementById("loading");

    // populate dropdown
    categories.forEach(c => catSel.add(new Option(c, c)));

    // consistent prefix pattern for each folder
    function normaliseName(cat) {
      // all follow "[Category] Blocks"
      if (cat === "404") return "404 Error Blocks";
      return `${cat} Blocks`;
    }

    function loadImages() {
      const cat = catSel.value;
      const dev = devSel.value;
      const mode = modeSel.value;
      const prefix = normaliseName(cat);

      gallery.innerHTML = "";
      loading.style.display = "flex";

      const fragment = document.createDocumentFragment();

      for (let i = 1; i <= 120; i++) {
        const img = new Image();
        img.loading = "lazy";
        img.decoding = "async";

        // two possible file name endings
        const url1 = `${BASE}/${cat}/${dev}/${mode}/${prefix}-${i}_result.webp`;
        const url2 = `${BASE}/${cat}/${dev}/${mode}/${prefix}-${i}_result_result.webp`;

        img.src = url1;
        img.onerror = () => {
          img.onerror = null;
          img.src = url2;
        };

        img.alt = `${cat} block`;
        img.className = "w-full rounded-xl shadow-lg transition-transform hover:scale-105";
        fragment.appendChild(img);
      }

      gallery.appendChild(fragment);
      loading.style.display = "none";
    }

    catSel.onchange = loadImages;
    devSel.onchange = loadImages;
    modeSel.onchange = loadImages;

    catSel.value = "404";
    loadImages();
  </script>
</body>
</html>
