<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SlideUI Block Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .glass { backdrop-filter: blur(12px); background: rgba(15,15,15,0.7); border: 1px solid rgba(255,255,255,0.1); }
    .spinner { width: 24px; height: 24px; border: 3px solid #333; border-top-color: #06b6d4; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .gallery img { @apply w-full rounded-xl shadow-lg transition-all duration-200; }
    .gallery img:hover { @apply scale-105 shadow-2xl; }
  </style>
</head>
<body class="bg-gray-950 text-white min-h-screen flex flex-col items-center">

  <header class="glass w-full max-w-4xl mx-auto mt-6 p-5 rounded-2xl flex flex-wrap gap-3 justify-center items-center sticky top-4 z-10 shadow-xl">
    <h1 class="text-2xl font-bold">SlideUI Blocks</h1>
    <select id="category" class="px-4 py-2 bg-gray-800 text-white rounded-lg focus:ring-2 focus:ring-cyan-500"></select>
    <select id="device" class="px-4 py-2 bg-gray-800 text-white rounded-lg focus:ring-2 focus:ring-cyan-500">
      <option>Desktop</option>
      <option>Mobile</option>
    </select>
    <select id="mode" class="px-4 py-2 bg-gray-800 text-white rounded-lg focus:ring-2 focus:ring-cyan-500">
      <option>Dark Mode</option>
      <option>Light Mode</option>
      <option>Accent Mode</option>
    </select>
  </header>

  <main class="w-full max-w-4xl mt-8 px-4 pb-20">
    <div id="gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    <div id="loading" class="flex items-center justify-center py-12 text-gray-400">
      <div class="spinner mr-3"></div>
      <span>Loading manifest…</span>
    </div>
  </main>

  <script>
    // CHANGE THIS LINE TO YOUR GITHUB USERNAME & REPO
    const BASE = 'https://cdn.jsdelivr.net/gh/YOUR_USERNAME/YOUR_REPO@main/block-images';
    // Example: 'https://cdn.jsdelivr.net/gh/johndoe/slideui@main/block-images'

    const catSel = document.getElementById('category');
    const devSel = document.getElementById('device');
    const modeSel = document.getElementById('mode');
    const gallery = document.getElementById('gallery');
    const loading = document.getElementById('loading');
    let manifest = null;

    async function init() {
      try {
        const res = await fetch(`${BASE}/manifest.json`);
        manifest = await res.json();

        Object.keys(manifest).forEach(cat => {
          const opt = new Option(cat, cat);
          catSel.appendChild(opt);
        });

        catSel.value = '404';
        loadImages();
      } catch (e) {
        loading.innerHTML = `<p class="text-red-400">Error: Could not load manifest.json<br>Did you upload it?</p>`;
      }
    }

    async function loadImages() {
      const cat = catSel.value;
      const dev = devSel.value;
      const mode = modeSel.value;

      if (!manifest || !manifest[cat]?.[dev]?.[mode]) {
        gallery.innerHTML = '<p class="col-span-full text-center text-gray-500">No blocks found.</p>';
        loading.textContent = '';
        return;
      }

      const files = manifest[cat][dev][mode];
      gallery.innerHTML = '';
      loading.innerHTML = `<div class="spinner mr-3"></div><span>Loading ${files.length} blocks…</span>`;

      const fragment = document.createDocumentFragment();
      let loaded = 0;

      files.forEach(file => {
        const img = new Image();
        img.loading = 'lazy';
        img.className = 'w-full rounded-xl shadow-lg transition-transform hover:scale-105';
        img.src = `${BASE}/${cat}/${dev}/${mode}/${file}`;
        img.alt = `${cat} block`;

        img.onload = () => {
          loaded++;
          if (loaded === files.length) loading.textContent = '';
        };
        fragment.appendChild(img);
      });

      gallery.appendChild(fragment);
    }

    catSel.onchange = loadImages;
    devSel.onchange = loadImages;
    modeSel.onchange = loadImages;

    init();
  </script>
</body>
</html>
